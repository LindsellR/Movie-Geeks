<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: models.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: models.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file models.js
 * @description Defines Mongoose schemas and models for Movies and Users in the Movie-Geeks API.
 */

const mongoose = require("mongoose");
const bcrypt = require("bcrypt");

/**
 * @typedef Movie
 * @property {string} _id
 * @property {string} Title
 * @property {string} Description
 * @property {Genre} Genre
 * @property {Director} Director
 * @property {Array&lt;string>} Actors
 * @property {string} ImageURL
 * @property {boolean} Featured
 */

let movieSchema = mongoose.Schema({
  Title: { type: String, required: true },
  Description: { type: String, required: true },

  /**
   * @typedef Genre
   * @property {string} Name
   * @property {string} Description
   */
  Genre: {
    Name: { type: String },
    Description: { type: String },
  },
  /**
   * @typedef Director
   * @property {string} Name
   * @property {string} Bio
   * @property {string} Born
   * @property {string} Died
   */
  Director: {
    Name: { type: String },
    Bio: { type: String },
    Born: { type: Date },
    Died: { type: Date },
  },
  Actors: [{ type: String }],
  ImagePath: { type: String },
  Featured: { type: Boolean },
});

/**
 * @typedef User
 * @property {string} Email - User's email address (required).
 * @property {string} Username - Unique username chosen by the user (required).
 * @property {string} Password - Hashed password for authentication (required).
 * @property {Date} [Birthday] - User's date of birth (optional).
 * @property {Array&lt;ObjectId>} [FavouriteMovies] - List of movie ObjectIds marked as favorites.
 *
 * @example
 * {
 *   "Email": "jane.doe@example.com",
 *   "Username": "janedoe123",
 *   "Password": "$2a$10$hashedpassword",
 *   "Birthday": "1985-05-15T00:00:00.000Z",
 *   "FavouriteMovies": ["60c72b2f5f1b2c6d88f12345", "60c72b3f6f1b2c6d88f12346"]
 * }
 */
let userSchema = mongoose.Schema({
  Email: { type: String, required: true },
  Username: { type: String, required: true },
  Password: { type: String, required: true },
  Birthday: Date,
  FavouriteMovies: [{ type: mongoose.Schema.Types.ObjectId, ref: "Movie" }],
});


userSchema.statics.hashPassword = (password) => {
  return bcrypt.hashSync(password, 10);
};

userSchema.methods.validatePassword = function (password) {
  return bcrypt.compareSync(password, this.Password);
};

let Movie = mongoose.model("Movie", movieSchema);
let User = mongoose.model("User", userSchema);

module.exports.Movie = Movie;
module.exports.User = User;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#JWTStrategy">JWTStrategy</a></li><li><a href="global.html#LocalStrategy">LocalStrategy</a></li><li><a href="global.html#addFavouriteMovie">addFavouriteMovie</a></li><li><a href="global.html#deleteFavourite">deleteFavourite</a></li><li><a href="global.html#deleteUser">deleteUser</a></li><li><a href="global.html#errorHandler">errorHandler</a></li><li><a href="global.html#getActors">getActors</a></li><li><a href="global.html#getDirector">getDirector</a></li><li><a href="global.html#getGenre">getGenre</a></li><li><a href="global.html#getMovieByTitle">getMovieByTitle</a></li><li><a href="global.html#getMovies">getMovies</a></li><li><a href="global.html#getUser">getUser</a></li><li><a href="global.html#registerUser">registerUser</a></li><li><a href="global.html#removeTrailingSlashes">removeTrailingSlashes</a></li><li><a href="global.html#startServer">startServer</a></li><li><a href="global.html#updateUser">updateUser</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Mon Jul 21 2025 18:07:32 GMT+1000 (Australian Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
